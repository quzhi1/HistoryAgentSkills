---
name: query-history-dictionary
description: 查询权威的中国历史大辞典，获取历史人物、事件、制度、地理等专业解释。当用户询问中国历史相关问题、历史概念定义、历史人物生平、历史事件详情时使用此技能。
---

# 中国历史大辞典查询

查询《中国历史大辞典4合1》，这是一本权威的历史工具书，包含历史人物、事件、制度、地理、典章等详尽解释。

## 辞典文件位置

- MDX文件：`dict/历史辞典4合1.mdx`

## 使用方法

### 0. 环境准备⚠️

**重要**：查询前必须激活虚拟环境！

```bash
# 激活虚拟环境
cd /Users/zhi.q/HistoryAgentSkills
source venv/bin/activate
```

**常见错误**："mdict: command not found"
- **原因**：未激活虚拟环境
- **解决**：运行上述命令激活环境

详见：[环境配置指南](../ENVIRONMENT_SETUP.md)

### 1. 安装依赖

首次使用需要安装 mdict-utils：

```bash
pip install mdict-utils
```

### 2. 查询词条

使用 mdict 命令查询（**需要在虚拟环境中**）：

```bash
# 确保已激活虚拟环境
source venv/bin/activate

# 查询
mdict -q "关键词" dict/历史辞典4合1.mdx
```

或使用完整路径（不需要激活）：

```bash
cd /Users/zhi.q/HistoryAgentSkills
venv/bin/mdict -q "关键词" dict/历史辞典4合1.mdx
```

### 3. 查询流程

当用户提出历史问题时，按以下步骤操作：

1. **提取关键词**：从用户问题中提取核心历史名词（人名、地名、事件名、制度名等）

2. **查询辞典**：对每个关键词执行查询命令

3. **解析结果**：辞典返回的是专业的历史解释，包含：
   - 基本定义
   - 历史背景
   - 相关人物和事件
   - 时间地点
   - 历史影响

4. **引用原文**：在回答中必须引用辞典原文，格式如下：
   ```
   根据《中国历史大辞典》：
   「辞典原文内容」
   ```

5. **史料出处（强制）**：凡涉及史料的回答，**一律给出处**，且出处**必须包含书名与章节名**（如《魏书》卷三五《崔浩传》）。若辞典词条中提及史书来源（如「见《旧唐书》卷XXX」），必须原样写出书名与卷、传/纪名；若辞典未写卷章，需根据人物朝代推断正史并注明「当见《XX》卷X《XX传》等，详见正史」。

6. **结合 cnkgraph 补充细节**：回答人物、事件类问题时，**不要仅查辞典**。应视情况使用 cnkgraph 技能（尤其是 **Book/Find** 原文片段检索）补充**具体时间、地点、相关人物、起因、经过、结果**；可多组关键词（人名、事件短语）检索并引用返回片段，标明出处（书名+章节名）。

7. **综合分析**：基于辞典与古籍 API 内容回答用户问题，必要时结合多个词条与原文片段。

## 查询技巧

### 多关键词策略

如果用户问题涉及多个概念，依次查询每个关键词：

```bash
mdict -q "玄武门之变" dict/历史辞典4合1.mdx
mdict -q "李世民" dict/历史辞典4合1.mdx
mdict -q "李建成" dict/历史辞典4合1.mdx
```

### 模糊查询

如果精确关键词查不到，尝试：
- 简化关键词（如"唐太宗李世民" → "李世民"）
- 使用同义词或别称
- 查询相关的更大类别

### 处理未找到的情况

如果辞典中查不到某个词条：
1. 不要猜测或编造内容
2. 尝试查询相关词条
3. 明确告知用户辞典中未收录此词条
4. 可以结合古籍知识图谱API查询（使用 cnkgraph 技能）

## 回答规范

### 必须遵守

- ✅ **引用原文**：必须使用书名号和引号标注辞典内容
- ✅ **保持准确**：不要修改或曲解辞典内容
- ✅ **注明出处**：明确说明信息来自《中国历史大辞典》
- ✅ **史料一律给出处**：凡引用或转述史料，**必须**标明出处，且出处**必须包含书名与章节名**（如《XX史》卷X《XX传》），不得只写内容不写书名章节
- ✅ **完整引用**：引用关键信息时要完整，不要断章取义

### 禁止操作

- ❌ 不要在没有查询的情况下凭空回答
- ❌ 不要篡改辞典原文
- ❌ 不要将个人推测当作辞典内容
- ❌ 不要忽略辞典内容而使用其他来源

## 示例

### 示例1：查询历史人物

**用户问题**：李白是哪个朝代的诗人？

**操作**：
```bash
mdict -q "李白" dict/历史辞典4合1.mdx
```

**回答格式**：
```
根据《中国历史大辞典》：

「李白（701-762），字太白，号青莲居士。唐代伟大诗人...（辞典原文）」

李白是唐代诗人，生活在公元701-762年间。
```

### 示例2：查询历史事件

**用户问题**：安史之乱是怎么回事？

**操作**：
```bash
mdict -q "安史之乱" dict/历史辞典4合1.mdx
```

**回答格式**：
```
根据《中国历史大辞典》：

「安史之乱，唐代天宝十四载（755年）至代宗宝应元年（762年）...（辞典原文）」

这是唐代中期的一次重大叛乱...（基于辞典内容的分析）
```

### 示例3：多概念查询

**用户问题**：科举制度是什么时候开始的？

**操作**：
```bash
mdict -q "科举制度" dict/历史辞典4合1.mdx
mdict -q "科举" dict/历史辞典4合1.mdx
mdict -q "隋朝" dict/历史辞典4合1.mdx
```

## 与古籍知识图谱协同

对于需要原始史料支撑的问题，应该：

1. 先查询历史辞典获得基本认知和准确定义
2. 再使用古籍知识图谱API（cnkgraph技能）查找相关古籍原文
3. 将辞典解释和古籍原文结合起来，给出有据可查的完整回答

## 常见问题

**Q: 辞典文件太大无法读取怎么办？**
A: 不需要读取整个文件，使用 mdict -q 命令进行精确查询即可。

**Q: 查询速度慢怎么办？**
A: 首次查询可能较慢，后续查询会快很多。可以一次查询多个关键词。

**Q: 如何判断查询是否成功？**
A: 命令返回非空内容即为成功。如果返回空或报错，说明未找到该词条。
